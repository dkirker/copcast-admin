<div class="history">
  <div class="navbar navbar-default navbar-static-top">
    <nav class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".main-nav">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse main-nav" style="padding-top: 1px;">
        <ul class="nav navbar-nav">
          <li class="pull-left">
            <user-dropdown
              ng-model="::manager.store.groups"
              on-change-user="manager.setCurrentGroup">
            </user-dropdown>
          </li>
        </ul>

        <date-filter
          initial-period="initialPeriod"
          on-change-period="manager.setPeriod"
          max-period-of-days="20"></date-filter>
      </div>
    </nav>
  </div>

  <loading></loading>

  <main map class="map canvas"
        user-data="manager.store.userData"
        marker-locations="manager.store.map.markers"
        heatmap-locations="manager.store.map.locations">
  </main>

  <footer class="navbar navbar-default navbar-static-bottom">
    <timeline
      on-select-date="manager.setCurrentDate"
      user-data="manager.store.userData"
      has-location="manager.store.hasLocation"
      current-video="manager.getCurrentVideo()"
      show-video="showVideo()">
    </timeline>

    <player ng-show="showVideo()"
            collection="manager.store.currentGroup"
            users="manager.store.currentGroup.users"
            incidents="manager.store.incidentsByUser"
            now-video="manager.getCurrentVideo()"
            cover="manager.getCurrentVideo().id"
            src="manager.getCurrentVideo().src"
            on-change-user="manager.setCurrentUser"
            on-previous-video="manager.previousVideo"
            on-next-video="manager.nextVideo"
            has-previous-video="manager.hasPreviousVideo()"
            has-next-video="manager.hasNextVideo()">
    </player>
  </footer>
</div>
